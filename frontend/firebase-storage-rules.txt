// Firebase Storage セキュリティルール
// Firebase Console > Storage > Rules で以下のルールを設定してください

rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // 写真フォルダのルール
    match /photos/{userId}/{fileName} {
      // 認証済みユーザーのみ、自分のフォルダにアップロード可能
      allow write: if request.auth != null 
                   && request.auth.uid == userId
                   && resource == null; // 新規ファイルのみ
      
      // 認証済みユーザーは全ての写真を読み取り可能
      allow read: if request.auth != null;
    }
    
    // その他のファイルは管理者のみアクセス可能
    match /{allPaths=**} {
      allow read, write: if false; // デフォルトは拒否
    }
  }
}

// 設定手順:
// 1. Firebase Console (https://console.firebase.google.com/) にアクセス
// 2. プロジェクトを選択
// 3. 左メニューから「Storage」を選択
// 4. 「Rules」タブをクリック
// 5. 上記のルールをコピー&ペーストして「公開」をクリック
